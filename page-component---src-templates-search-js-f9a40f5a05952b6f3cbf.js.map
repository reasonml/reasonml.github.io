{"version":3,"sources":["webpack:///page-component---src-templates-search-js-f9a40f5a05952b6f3cbf.js","webpack:///./src/components/GuideSidebar.js?7c5b","webpack:///./src/templates/Search.js"],"names":["webpackJsonp","./src/components/GuideSidebar.js","module","exports","__webpack_require__","Glamor","_interopRequireDefault","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","constructTree","fixPath","sidebarFragment","undefined","_container","_link","_extends","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","_react","_Link","_Link2","_typography","_colors","GuideSidebar","_ref","current","props","root","search","createElement","css","styles","container","contents","to","Node","item","depth","_ref2","_ref2$item","title","relativePath","children","linkStyles","link","currentLink","node","rootNode","rootChildren","map","child","style","li","phablet","width","rhythm","scale","headerFontFamily","padding","margin","textDecoration","color","textDecorationColor","link1","fontWeight","listStyle","paddingLeft","marginLeft","borderLeft","match","slice","parseData","nodes","_ref3","_ref3$childMarkdownRe","childMarkdownRemark","frontmatter","order","values","keys","k","listify","sort","a","b","section","files","tree","forEach","_ref4","parts","split","last","pop","parent","part","./node_modules/babel-loader/lib/index.js?{\"plugins\":[\"/Users/chenglou/Github/reasonml.github.io/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js\",\"add-module-exports\",\"add-module-exports\",\"transform-object-assign\",[\"transform-react-jsx\",{\"pragma\":\"Glamor.createElement\"}],\"babel-plugin-glamor\"],\"presets\":[\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-env/lib/index.js\",\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-stage-0/lib/index.js\",\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-react/lib/index.js\"],\"cacheDirectory\":true}!./src/templates/Search.js","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","pageQuery","_createClass","defineProperties","descriptor","protoProps","staticProps","_react2","_reactHelmet","_reactHelmet2","_Section","_Section2","_GuideSidebar","_GuideSidebar2","_Header","_Header2","walk","fn","childNodes","res","replaceChild","highlightContents","needle","nodeName","nodeValue","document","innerHTML","replace","v","highlight","html","tmp","matching","textContent","push","outerHTML","shift","m","join","edges","rx","RegExp","filter","_ref$node$childMarkdo","_ref2$node","_ref2$node$childMarkd","Search","_React$Component","this","_this","getPrototypeOf","_initialiseProps","text","decodeURIComponent","location","state","results","trim","data","allFile","toLowerCase","searchText","input","focus","_this2","searchBar","ref","searchInput","onChange","e","setText","type","result","resultTitleWrapper","resultTitle","resultBody","dangerouslySetInnerHTML","__html","_props$pathContext","pathContext","sectionTitle","backgroundColor","accent","inverted","alignItems","topLink","contentSection","sidebar","edge","renderMain","Component","_this3","window","history","replaceState","pathname","setState","flex","flexShrink","editLink","fontSize","lineHeight","borderBottom","display","flexDirection","justifyContent","@media(max-width: 800px)","main","position","minWidth","marginBottom","& .search-highlighted-result","& p","& .search-elided-section","height","marginTop","& ul","& code"],"mappings":"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","file":"page-component---src-templates-search-js-f9a40f5a05952b6f3cbf.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ \"./src/components/GuideSidebar.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Glamor) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.constructTree = exports.fixPath = exports.sidebarFragment = undefined;\n\t\n\tvar _container, _link;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _react = __webpack_require__(\"./node_modules/react/react.js\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _Link = __webpack_require__(\"./src/components/Link.js\");\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _typography = __webpack_require__(\"./src/utils/typography.js\");\n\t\n\tvar _colors = __webpack_require__(\"./src/utils/colors.js\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar GuideSidebar = function GuideSidebar(_ref) {\n\t  var props = _ref.props,\n\t      current = _ref.current,\n\t      root = _ref.root,\n\t      search = _ref.search;\n\t  return Glamor.createElement(\n\t    'div',\n\t    { css: styles.container },\n\t    Glamor.createElement(\n\t      'div',\n\t      { css: styles.contents },\n\t      Glamor.createElement(\n\t        _Link2.default,\n\t        { to: search },\n\t        'Search'\n\t      ),\n\t      Glamor.createElement(Node, { current: current, item: root, root: true, depth: 0 })\n\t    )\n\t  );\n\t};\n\t\n\tvar Node = function Node(_ref2) {\n\t  var current = _ref2.current,\n\t      root = _ref2.root,\n\t      _ref2$item = _ref2.item,\n\t      title = _ref2$item.title,\n\t      relativePath = _ref2$item.relativePath,\n\t      children = _ref2$item.children,\n\t      depth = _ref2.depth;\n\t\n\t  var linkStyles = [styles.link, styles['link' + depth], relativePath === current && styles.currentLink];\n\t  return children.length ? Glamor.createElement(\n\t    'div',\n\t    { css: [styles.node, root && styles.rootNode] },\n\t    !root ? Glamor.createElement(\n\t      _Link2.default,\n\t      { to: relativePath, css: linkStyles },\n\t      title\n\t    ) : null,\n\t    Glamor.createElement(\n\t      'ul',\n\t      { css: [styles.children, root && styles.rootChildren] },\n\t      children.map(function (child) {\n\t        return Glamor.createElement(\n\t          'li',\n\t          { style: styles.li, key: child.relativePath },\n\t          Glamor.createElement(Node, { current: current, item: child, depth: depth + 1 })\n\t        );\n\t      })\n\t    )\n\t  ) : Glamor.createElement(\n\t    _Link2.default,\n\t    { css: [styles.node, linkStyles], to: relativePath },\n\t    title\n\t  );\n\t};\n\t\n\texports.default = GuideSidebar;\n\tvar sidebarFragment = exports.sidebarFragment = '** extracted graphql fragment **';\n\t\n\tvar phablet = '@media(max-width: 800px)';\n\t\n\tvar styles = {\n\t  container: (_container = {\n\t    width: (0, _typography.rhythm)(8)\n\t  }, _defineProperty(_container, phablet, _extends({}, (0, _typography.scale)(0), {\n\t    width: 'auto'\n\t  })), _defineProperty(_container, 'fontFamily', (0, _typography.headerFontFamily)()), _container),\n\t\n\t  contents: {\n\t    padding: (0, _typography.rhythm)(1 / 3) + ' ' + (0, _typography.rhythm)(1 / 2)\n\t  },\n\t\n\t  node: {},\n\t\n\t  li: {\n\t    margin: 0,\n\t    padding: 0\n\t  },\n\t\n\t  link: (_link = {\n\t    textDecoration: 'none',\n\t    color: 'currentColor'\n\t  }, _defineProperty(_link, phablet, {\n\t    padding: '' + (0, _typography.rhythm)(1 / 4)\n\t  }), _defineProperty(_link, 'display', 'block'), _link),\n\t\n\t  currentLink: {\n\t    textDecoration: 'underline',\n\t    textDecorationColor: _colors.accent,\n\t    color: _colors.accent\n\t  },\n\t\n\t  link1: _extends({\n\t    fontWeight: 'bold'\n\t  }, (0, _typography.scale)(0)),\n\t\n\t  children: _extends({}, (0, _typography.scale)(-0.2), {\n\t    listStyle: 'none',\n\t    margin: 0,\n\t    padding: 0,\n\t    paddingLeft: (0, _typography.rhythm)(.5),\n\t    marginLeft: 0,\n\t    borderLeft: '1px solid #aaa'\n\t  }),\n\t\n\t  rootChildren: {\n\t    borderLeft: 'none',\n\t    marginLeft: 0,\n\t    paddingLeft: 0\n\t  }\n\t};\n\t\n\tvar fixPath = exports.fixPath = function fixPath(relativePath) {\n\t  if (relativePath.match(/\\/index\\.md$/)) {\n\t    return '/' + relativePath.slice(0, -'/index.md'.length);\n\t  }\n\t  return '/' + relativePath.slice(0, -'.md'.length);\n\t};\n\t\n\tvar parseData = function parseData(nodes) {\n\t  return nodes.map(function (_ref3) {\n\t    var relativePath = _ref3.relativePath,\n\t        _ref3$childMarkdownRe = _ref3.childMarkdownRemark.frontmatter,\n\t        title = _ref3$childMarkdownRe.title,\n\t        order = _ref3$childMarkdownRe.order;\n\t    return { relativePath: fixPath(relativePath), title: title, order: order };\n\t  });\n\t};\n\t\n\tvar values = function values(obj) {\n\t  return Object.keys(obj).map(function (k) {\n\t    return obj[k];\n\t  });\n\t};\n\t\n\tvar listify = function listify(node) {\n\t  return _extends({}, node, {\n\t    children: values(node.children).sort(function (a, b) {\n\t      return a.order - b.order;\n\t    }).map(listify)\n\t  });\n\t};\n\t\n\tvar constructTree = exports.constructTree = function constructTree(section, files) {\n\t  var tree = { children: {} };\n\t  parseData(files).forEach(function (_ref4) {\n\t    var relativePath = _ref4.relativePath,\n\t        title = _ref4.title,\n\t        order = _ref4.order;\n\t\n\t    var parts = relativePath.split(/\\//g).slice(1);\n\t    var last = parts.pop();\n\t    var parent = tree;\n\t    parts.forEach(function (part) {\n\t      if (!parent.children[part]) parent.children[part] = { children: {} };\n\t      parent = parent.children[part];\n\t    });\n\t    parent.children[last] = _extends({\n\t      children: {}\n\t    }, parent.children[last], {\n\t      relativePath: relativePath,\n\t      title: title,\n\t      order: order\n\t    });\n\t  });\n\t  return listify(tree.children[section]);\n\t};\n\t\n\t// TODO\n\t// export const query =\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/glamor-react/lib/index.js\")))\n\n/***/ }),\n\n/***/ \"./node_modules/babel-loader/lib/index.js?{\\\"plugins\\\":[\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js\\\",\\\"add-module-exports\\\",\\\"add-module-exports\\\",\\\"transform-object-assign\\\",[\\\"transform-react-jsx\\\",{\\\"pragma\\\":\\\"Glamor.createElement\\\"}],\\\"babel-plugin-glamor\\\"],\\\"presets\\\":[\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-env/lib/index.js\\\",\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-stage-0/lib/index.js\\\",\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-react/lib/index.js\\\"],\\\"cacheDirectory\\\":true}!./src/templates/Search.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Glamor) {\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.pageQuery = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(\"./node_modules/react/react.js\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactHelmet = __webpack_require__(\"./node_modules/react-helmet/lib/Helmet.js\");\n\t\n\tvar _reactHelmet2 = _interopRequireDefault(_reactHelmet);\n\t\n\tvar _Section = __webpack_require__(\"./src/components/Section.js\");\n\t\n\tvar _Section2 = _interopRequireDefault(_Section);\n\t\n\tvar _GuideSidebar = __webpack_require__(\"./src/components/GuideSidebar.js\");\n\t\n\tvar _GuideSidebar2 = _interopRequireDefault(_GuideSidebar);\n\t\n\tvar _colors = __webpack_require__(\"./src/utils/colors.js\");\n\t\n\tvar _typography = __webpack_require__(\"./src/utils/typography.js\");\n\t\n\tvar _Link = __webpack_require__(\"./src/components/Link.js\");\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _Header = __webpack_require__(\"./src/components/Header.js\");\n\t\n\tvar _Header2 = _interopRequireDefault(_Header);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar walk = function walk(node, fn) {\n\t  [].forEach.call(node.childNodes, function (child) {\n\t    var res = fn(child);\n\t    if (res) {\n\t      node.replaceChild(res, child);\n\t    } else {\n\t      walk(child, fn);\n\t    }\n\t  });\n\t};\n\t\n\tvar highlightContents = function highlightContents(node, needle) {\n\t  walk(node, function (child) {\n\t    if (child.nodeName === '#text') {\n\t      if (child.nodeValue.match(needle)) {\n\t        var _node = document.createElement('span');\n\t        _node.innerHTML = child.nodeValue.replace(needle, function (v) {\n\t          return '<span class=\"search-highlighted-result\">' + v + '</span>';\n\t        });\n\t        return _node;\n\t      }\n\t    }\n\t  });\n\t};\n\t\n\tvar highlight = function highlight(html, needle) {\n\t  var tmp = document.createElement('div');\n\t  tmp.innerHTML = html;\n\t  var matching = [null];\n\t  ;[].forEach.call(tmp.childNodes, function (node) {\n\t    if (node.textContent.match(needle)) {\n\t      highlightContents(node, needle);\n\t      matching.push(node.outerHTML);\n\t    } else if (matching[matching.length - 1] !== null) {\n\t      matching.push(null);\n\t    }\n\t  });\n\t  if (matching[0] === null) matching.shift();\n\t  if (matching[matching.length - 1] === null) matching.pop();\n\t  return matching.map(function (m) {\n\t    return m === null ? '<p class=\"search-elided-section\">...</p>' : m;\n\t  }).join('\\n');\n\t};\n\t\n\tvar search = function search(edges, needle) {\n\t  var rx = new RegExp(needle, 'ig');\n\t  return edges.filter(function (_ref) {\n\t    var _ref$node$childMarkdo = _ref.node.childMarkdownRemark,\n\t        html = _ref$node$childMarkdo.html,\n\t        title = _ref$node$childMarkdo.frontmatter.title;\n\t\n\t    if (title.match(rx) || html.match(rx)) {\n\t      return true;\n\t    }\n\t  }).map(function (_ref2) {\n\t    var _ref2$node = _ref2.node,\n\t        relativePath = _ref2$node.relativePath,\n\t        _ref2$node$childMarkd = _ref2$node.childMarkdownRemark,\n\t        html = _ref2$node$childMarkd.html,\n\t        title = _ref2$node$childMarkd.frontmatter.title;\n\t\n\t    return {\n\t      relativePath: relativePath,\n\t      html: highlight(html, needle),\n\t      // html: html.replace(rx, v => '<span style=\"font-weight: bold; background-color: red\">' + v + '</span>'),\n\t      title: title // TODO highlight cleverly, probably use the markdown\n\t      // source instead\n\t    };\n\t  });\n\t};\n\t\n\tvar Search = function (_React$Component) {\n\t  _inherits(Search, _React$Component);\n\t\n\t  function Search(props) {\n\t    _classCallCheck(this, Search);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Search.__proto__ || Object.getPrototypeOf(Search)).call(this));\n\t\n\t    _initialiseProps.call(_this);\n\t\n\t    var text = decodeURIComponent(props.location.search.slice(1));\n\t    _this.state = {\n\t      results: text.trim().length > 2 ? search(props.data.allFile.edges, text.toLowerCase()) : [],\n\t      searchText: text\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Search, [{\n\t    key: \"componentDidMount\",\n\t    value: function componentDidMount() {\n\t      this.input.focus();\n\t    }\n\t  }, {\n\t    key: \"renderMain\",\n\t    value: function renderMain() {\n\t      var _this2 = this;\n\t\n\t      return Glamor.createElement(\n\t        \"div\",\n\t        { css: styles.container },\n\t        Glamor.createElement(\n\t          \"div\",\n\t          { css: styles.searchBar },\n\t          \"Search\",\n\t          Glamor.createElement(\"input\", {\n\t            ref: function ref(input) {\n\t              return _this2.input = input;\n\t            },\n\t            css: styles.searchInput,\n\t            onChange: function onChange(e) {\n\t              return _this2.setText(e.target.value);\n\t            },\n\t            value: this.state.searchText,\n\t            type: \"text\"\n\t          })\n\t        ),\n\t        Glamor.createElement(\n\t          \"div\",\n\t          { css: styles.results },\n\t          this.state.results.slice(0, 10).map(function (result) {\n\t            return Glamor.createElement(\n\t              \"div\",\n\t              { key: result.relativePath, css: styles.result },\n\t              Glamor.createElement(\n\t                \"h4\",\n\t                { css: styles.resultTitleWrapper },\n\t                Glamor.createElement(\n\t                  _Link2.default,\n\t                  { css: styles.resultTitle, to: (0, _GuideSidebar.fixPath)(result.relativePath) },\n\t                  \"\\u2023 \",\n\t                  result.title\n\t                )\n\t              ),\n\t              Glamor.createElement(\"div\", {\n\t                css: styles.resultBody,\n\t                dangerouslySetInnerHTML: { __html: result.html }\n\t              })\n\t            );\n\t          })\n\t        )\n\t      );\n\t    }\n\t  }, {\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _props$pathContext = this.props.pathContext,\n\t          section = _props$pathContext.section,\n\t          sectionTitle = _props$pathContext.sectionTitle;\n\t      var allFile = this.props.data.allFile;\n\t\n\t      return Glamor.createElement(\n\t        \"div\",\n\t        null,\n\t        Glamor.createElement(_reactHelmet2.default, { title: sectionTitle + \" Search\" }),\n\t        Glamor.createElement(\n\t          _Section2.default,\n\t          { backgroundColor: _colors.accent, css: { color: 'white' } },\n\t          Glamor.createElement(_Header2.default, { inverted: true }),\n\t          Glamor.createElement(\n\t            \"div\",\n\t            { css: { alignItems: 'center' } },\n\t            Glamor.createElement(\n\t              \"h1\",\n\t              null,\n\t              Glamor.createElement(\n\t                _Link2.default,\n\t                { css: styles.topLink, to: \"/\" + section },\n\t                sectionTitle\n\t              )\n\t            )\n\t          )\n\t        ),\n\t        Glamor.createElement(\n\t          _Section2.default,\n\t          { css: styles.contentSection },\n\t          Glamor.createElement(\n\t            \"div\",\n\t            { css: styles.sidebar },\n\t            Glamor.createElement(_GuideSidebar2.default, {\n\t              current: section + \"/search\",\n\t              search: \"/\" + section + \"/search\",\n\t              root: (0, _GuideSidebar.constructTree)(section, allFile.edges.map(function (edge) {\n\t                return edge.node;\n\t              }))\n\t            })\n\t          ),\n\t          this.renderMain()\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Search;\n\t}(_react2.default.Component);\n\t\n\tvar _initialiseProps = function _initialiseProps() {\n\t  var _this3 = this;\n\t\n\t  this.setText = function (text) {\n\t    window.history.replaceState({}, document.title, window.location.pathname + '?' + text);\n\t    _this3.setState({\n\t      searchText: text,\n\t      results: text.trim().length > 2 ? search(_this3.props.data.allFile.edges, text.toLowerCase()) : []\n\t    });\n\t  };\n\t};\n\t\n\texports.default = Search;\n\t\n\t\n\tvar styles = {\n\t  container: {\n\t    flex: 1,\n\t    flexShrink: 1\n\t  },\n\t  editLink: {\n\t    fontSize: '14px',\n\t    fontWeight: 'normal',\n\t    lineHeight: '25px'\n\t  },\n\t  title: {\n\t    borderBottom: '1px solid #aaa',\n\t    display: 'flex',\n\t    flexDirection: 'row',\n\t    justifyContent: 'space-between',\n\t    alignItems: 'flex-end'\n\t  },\n\t  contentSection: {\n\t    flexDirection: 'row',\n\t    '@media(max-width: 800px)': {\n\t      flexDirection: 'column'\n\t    }\n\t  },\n\t  sidebar: {\n\t    // padding: '2em',\n\t  },\n\t  main: {\n\t    position: 'relative',\n\t    flex: 1,\n\t    padding: '2em',\n\t    minWidth: 0\n\t  },\n\t\n\t  searchBar: {\n\t    flexDirection: 'row',\n\t    alignItems: 'center',\n\t    padding: 10\n\t  },\n\t\n\t  searchInput: {\n\t    flex: 1,\n\t    padding: '5px 10px',\n\t    fontSize: 18,\n\t    marginLeft: 10\n\t  },\n\t\n\t  results: {\n\t    padding: 10\n\t  },\n\t\n\t  result: {},\n\t\n\t  resultTitle: {\n\t    fontWeight: 'bold'\n\t  },\n\t\n\t  resultTitleWrapper: {\n\t    marginBottom: (0, _typography.rhythm)(0.5)\n\t  },\n\t\n\t  resultBody: {\n\t    fontSize: 12,\n\t    paddingLeft: 20,\n\t    '& .search-highlighted-result': {\n\t      backgroundColor: 'gold',\n\t      fontWeight: 'bold'\n\t    },\n\t    '& p': {\n\t      marginBottom: 10\n\t    },\n\t    '& .search-elided-section': {\n\t      color: '#aaa',\n\t      height: 5,\n\t      marginBottom: 15,\n\t      marginTop: -10\n\t    },\n\t    '& ul': {\n\t      marginBottom: 5\n\t    },\n\t    '& code': {\n\t      fontSize: 'inherit'\n\t    }\n\t  }\n\t\n\t};\n\t\n\tvar pageQuery = exports.pageQuery = \"** extracted graphql fragment **\";\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/glamor-react/lib/index.js\")))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// page-component---src-templates-search-js-f9a40f5a05952b6f3cbf.js","import React from 'react'\nimport Link from './Link'\n\nimport {scale, rhythm, headerFontFamily} from '../utils/typography'\nimport {accent} from '../utils/colors'\n\nconst GuideSidebar = ({props, current, root, search}) => (\n  <div css={styles.container}>\n    <div css={styles.contents}>\n      <Link to={search}>Search</Link>\n      <Node current={current} item={root} root depth={0} />\n    </div>\n  </div>\n)\n\nconst Node = ({current, root, item: {title, relativePath, children}, depth}) => {\n  const linkStyles = [styles.link, styles['link' + depth], relativePath === current && styles.currentLink]\n  return children.length\n  ? <div css={[styles.node, root && styles.rootNode]}>\n      {!root ? <Link to={relativePath} css={linkStyles}>{title}</Link> : null}\n      <ul css={[styles.children, root && styles.rootChildren]}>\n      {children.map(child => <li style={styles.li} key={child.relativePath}><Node current={current} item={child} depth={depth + 1} /></li>)}\n      </ul>\n    </div>\n  : <Link css={[styles.node, linkStyles]} to={relativePath}>{title}</Link>\n}\n\nexport default GuideSidebar\n\nexport const sidebarFragment = graphql`\n  fragment guideSidebar on RootQueryType {\n    allFile(filter:{\n      relativePath:{regex:$relatedFiles}\n    }) {\n      edges{\n        node{\n          relativePath\n          childMarkdownRemark{\n            frontmatter{\n              title\n              order\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst phablet = '@media(max-width: 800px)'\n\nconst styles = {\n  container: {\n    width: rhythm(8),\n    [phablet]: {\n      ...scale(0),\n      width: 'auto',\n    },\n    fontFamily: headerFontFamily(),\n  },\n\n  contents: {\n    padding: `${rhythm(1/3)} ${rhythm(1/2)}`,\n  },\n\n  node: {\n    \n  },\n\n  li: {\n    margin: 0,\n    padding: 0,\n  },\n\n  link: {\n    textDecoration: 'none',\n    color: 'currentColor',\n    [phablet]: {\n      padding: `${rhythm(1/4)}`\n    },\n    display: 'block',\n  },\n\n  currentLink: {\n    textDecoration: 'underline',\n    textDecorationColor: accent,\n    color: accent,\n  },\n\n  link1: {\n    fontWeight: 'bold',\n    ...scale(0),\n  },\n\n  children: {\n    ...scale(-0.2),\n    listStyle: 'none',\n    margin: 0,\n    padding: 0,\n    paddingLeft: rhythm(.5),\n    marginLeft: 0,\n    borderLeft: '1px solid #aaa',\n  },\n\n  rootChildren: {\n    borderLeft: 'none',\n    marginLeft: 0,\n    paddingLeft: 0,\n  },\n}\n\n\nexport const fixPath = relativePath => {\n  if (relativePath.match(/\\/index\\.md$/)) {\n    return '/' + relativePath.slice(0, -'/index.md'.length)\n  }\n  return '/' + relativePath.slice(0, -'.md'.length)\n}\n\nconst parseData = nodes => nodes.map(({\n  relativePath,\n  childMarkdownRemark: {frontmatter: {title, order}}\n}) => ({relativePath: fixPath(relativePath), title, order}))\n\nconst values = obj => Object.keys(obj).map(k => obj[k])\n\nconst listify = node => ({\n  ...node,\n  children: values(node.children)\n    .sort((a, b) => a.order - b.order)\n    .map(listify)\n})\n\nexport const constructTree = (section, files) => {\n  const tree = {children: {}}\n  parseData(files).forEach(({relativePath, title, order}) => {\n    const parts = relativePath.split(/\\//g).slice(1)\n    const last = parts.pop()\n    let parent = tree\n    parts.forEach(part => {\n      if (!parent.children[part]) parent.children[part] = {children: {}}\n      parent = parent.children[part]\n    })\n    parent.children[last] = {\n      children: {},\n      ...parent.children[last],\n      relativePath,\n      title,\n      order,\n    }\n  })\n  return listify(tree.children[section])\n}\n\n// TODO\n// export const query =\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GuideSidebar.js","import React from \"react\"\nimport Helmet from \"react-helmet\"\n\nimport Section from '../components/Section'\nimport GuideSidebar, {constructTree, fixPath} from '../components/GuideSidebar'\nimport {accent, gray} from '../utils/colors'\nimport {rhythm} from '../utils/typography'\n\nimport Link from \"../components/Link\"\nimport Header from '../components/Header'\n\nconst walk = (node, fn) => {\n  [].forEach.call(node.childNodes, child => {\n    const res = fn(child)\n    if (res) {\n      node.replaceChild(res, child)\n    } else {\n      walk(child, fn)\n    }\n  })\n}\n\nconst highlightContents = (node, needle) => {\n  walk(node, child => {\n    if (child.nodeName === '#text') {\n      if (child.nodeValue.match(needle)) {\n        const node = document.createElement('span')\n        node.innerHTML = child.nodeValue.replace(needle, v => '<span class=\"search-highlighted-result\">' + v + '</span>')\n        return node\n      }\n    }\n  })\n}\n\nconst highlight = (html, needle) => {\n  const tmp = document.createElement('div')\n  tmp.innerHTML = html;\n  const matching = [null];\n  ;[].forEach.call(tmp.childNodes, node => {\n    if (node.textContent.match(needle)) {\n      highlightContents(node, needle)\n      matching.push(node.outerHTML)\n    } else if (matching[matching.length - 1] !== null) {\n      matching.push(null)\n    }\n  })\n  if (matching[0] === null) matching.shift()\n  if (matching[matching.length - 1] === null) matching.pop()\n  return matching.map(m => m === null ? '<p class=\"search-elided-section\">...</p>' : m).join('\\n')\n}\n\nconst search = (edges, needle) => {\n  const rx = new RegExp(needle, 'ig')\n  return edges.filter(({node: {childMarkdownRemark: {html, frontmatter: {title}}}}) => {\n    if (title.match(rx) || html.match(rx)) {\n      return true\n    }\n  }).map(({node: {relativePath, childMarkdownRemark: {html, frontmatter: {title}}}}) => {\n    return {\n      relativePath,\n      html: highlight(html, needle),\n      // html: html.replace(rx, v => '<span style=\"font-weight: bold; background-color: red\">' + v + '</span>'),\n      title,\n    } // TODO highlight cleverly, probably use the markdown\n    // source instead\n  })\n}\n\nexport default class Search extends React.Component {\n  constructor(props) {\n    super()\n    const text = decodeURIComponent(props.location.search.slice(1))\n    this.state = {\n      results: text.trim().length > 2 ? search(props.data.allFile.edges, text.toLowerCase()) : [],\n      searchText: text,\n    }\n  }\n\n  setText = text => {\n    window.history.replaceState({}, document.title, window.location.pathname + '?' + text)\n    this.setState({\n      searchText: text,\n      results: text.trim().length > 2 ? search(this.props.data.allFile.edges, text.toLowerCase()) : []\n    })\n  }\n\n  componentDidMount() {\n    this.input.focus()\n  }\n\n  renderMain() {\n    return <div css={styles.container}>\n      <div css={styles.searchBar}>\n        Search\n        <input\n          ref={input => this.input = input}\n          css={styles.searchInput}\n          onChange={e => this.setText(e.target.value)}\n          value={this.state.searchText}\n          type=\"text\"\n        />\n      </div>\n      <div css={styles.results}>\n        {this.state.results.slice(0, 10).map(result => (\n          <div key={result.relativePath} css={styles.result}>\n            <h4 css={styles.resultTitleWrapper}>\n              <Link css={styles.resultTitle} to={fixPath(result.relativePath)}>\n                â€£ {result.title}\n              </Link>\n            </h4>\n            <div\n              css={styles.resultBody}\n              dangerouslySetInnerHTML={{__html: result.html}}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  }\n\n  render() {\n    const {section, sectionTitle} = this.props.pathContext\n    const {allFile} = this.props.data\n    return <div>\n      <Helmet title={`${sectionTitle} Search`} />\n      <Section backgroundColor={accent} css={{color: 'white'}}>\n        <Header inverted />\n        <div css={{alignItems: 'center'}}>\n          <h1>\n            <Link css={styles.topLink} to={`/${section}`}>\n              {sectionTitle}\n            </Link>\n          </h1>\n        </div>\n      </Section>\n      <Section css={styles.contentSection}>\n        <div css={styles.sidebar}>\n          <GuideSidebar\n            current={`${section}/search`}\n            search={`/${section}/search`}\n            root={constructTree(section, allFile.edges.map(edge => edge.node))}\n          />\n        </div>\n        {this.renderMain()}\n      </Section>\n    </div>\n  }\n}\n\nconst styles = {\n  container: {\n    flex: 1,\n    flexShrink: 1,\n  },\n  editLink: {\n    fontSize: '14px',\n    fontWeight: 'normal',\n    lineHeight: '25px',\n  },\n  title: {\n    borderBottom: '1px solid #aaa',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end',\n  },\n  contentSection: {\n    flexDirection: 'row',\n    '@media(max-width: 800px)': {\n      flexDirection: 'column',\n    },\n  },\n  sidebar: {\n    // padding: '2em',\n  },\n  main: {\n    position: 'relative',\n    flex: 1,\n    padding: '2em',\n    minWidth: 0,\n  },\n\n  searchBar: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 10,\n  },\n\n  searchInput: {\n    flex: 1,\n    padding: '5px 10px',\n    fontSize: 18,\n    marginLeft: 10,\n  },\n\n  results: {\n    padding: 10,\n  },\n\n  result: {\n\n  },\n\n  resultTitle: {\n    fontWeight: 'bold',\n  },\n\n  resultTitleWrapper: {\n    marginBottom: rhythm(0.5),\n  },\n\n  resultBody: {\n    fontSize: 12,\n    paddingLeft: 20,\n    '& .search-highlighted-result': {\n      backgroundColor: 'gold',\n      fontWeight: 'bold',\n    },\n    '& p': {\n      marginBottom: 10,\n    },\n    '& .search-elided-section': {\n      color: '#aaa',\n      height: 5,\n      marginBottom: 15,\n      marginTop: -10,\n    },\n    '& ul': {\n      marginBottom: 5,\n    },\n    '& code': {\n      fontSize: 'inherit',\n    }\n  }\n\n}\n\nexport const pageQuery = graphql`\n  query SearchPage($relatedFiles: String!) {\n    allFile(filter:{\n      relativePath:{regex:$relatedFiles}\n    }) {\n      edges{\n        node{\n          relativePath\n          childMarkdownRemark {\n            frontmatter {\n              title\n              order\n            }\n            html\n          }\n        }\n      }\n    }\n  }\n`\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/Search.js"],"sourceRoot":""}