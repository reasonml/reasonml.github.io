{"version":3,"sources":["webpack:///page-component---src-templates-search-js-4bd0cf48d27123ebc867.js","webpack:///./src/components/GuideSidebar.js?7c5b","webpack:///./src/templates/Search.js"],"names":["webpackJsonp","./src/components/GuideSidebar.js","module","exports","__webpack_require__","Glamor","_interopRequireDefault","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","constructTree","fixPath","sidebarFragment","undefined","_container","_extends2","_extends","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","_react","_Link","_Link2","_typography","_colors","GuideSidebar","_ref","current","props","root","search","createElement","css","styles","container","contents","link","display","to","searchIcon","xmlns","viewBox","fill","text","d","Node","item","depth","_ref2","_ref2$item","title","relativePath","children","linkStyles","currentLink","node","rootNode","rootChildren","map","child","style","li","phablet","width","rhythm","minHeight","padding","scale","headerFontFamily","gray","margin","textDecoration","color","textDecorationColor","link1","fontWeight","marginTop","marginBottom","listStyle","paddingLeft","marginLeft","borderLeft","height","alignSelf","match","slice","parseData","nodes","_ref3","_ref3$childMarkdownRe","childMarkdownRemark","frontmatter","order","values","keys","k","listify","sort","a","b","section","files","tree","forEach","_ref4","parts","split","last","pop","parent","part","sectionPath","treeToListify","reduce","acc","./node_modules/babel-loader/lib/index.js?{\"plugins\":[\"/Users/chenglou/Github/reasonml.github.io/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js\",\"add-module-exports\",\"add-module-exports\",\"transform-object-assign\",[\"transform-react-jsx\",{\"pragma\":\"Glamor.createElement\"}],\"babel-plugin-glamor\"],\"presets\":[\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-env/lib/index.js\",\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-stage-0/lib/index.js\",\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-react/lib/index.js\"],\"cacheDirectory\":true}!./src/templates/Search.js","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","pageQuery","_createClass","defineProperties","descriptor","protoProps","staticProps","_react2","_reactHelmet","_reactHelmet2","_Section","_Section2","_GuideSidebar","_GuideSidebar2","_Header","_Header2","walk","fn","childNodes","res","replaceChild","highlightContents","needle","nodeName","nodeValue","document","innerHTML","replace","v","highlight","html","tmp","matching","textContent","push","outerHTML","shift","m","join","edges","rx","RegExp","filter","_ref$node$childMarkdo","_ref2$node","_ref2$node$childMarkd","Search","_React$Component","this","_this","getPrototypeOf","_initialiseProps","decodeURIComponent","location","state","results","trim","data","allFile","toLowerCase","searchText","input","focus","_this2","searchBar","ref","searchInput","onChange","e","setText","type","result","resultTitleWrapper","resultTitle","resultBody","dangerouslySetInnerHTML","__html","_props$pathContext","pathContext","sectionTitle","backgroundColor","accent","inverted","alignItems","topLink","contentSection","sidebar","edge","renderMain","Component","_this3","window","history","replaceState","pathname","setState","flex","flexShrink","editLink","fontSize","lineHeight","borderBottom","dividerLine","flexDirection","justifyContent","@media(max-width: 800px)","main","position","minWidth","& .search-highlighted-result","& p","& .search-elided-section","& ul","& code"],"mappings":"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","file":"page-component---src-templates-search-js-4bd0cf48d27123ebc867.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ \"./src/components/GuideSidebar.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Glamor) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.constructTree = exports.fixPath = exports.sidebarFragment = undefined;\n\t\n\tvar _container, _extends2;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _react = __webpack_require__(\"./node_modules/react/react.js\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _Link = __webpack_require__(\"./src/components/Link.js\");\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _typography = __webpack_require__(\"./src/utils/typography.js\");\n\t\n\tvar _colors = __webpack_require__(\"./src/utils/colors.js\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar GuideSidebar = function GuideSidebar(_ref) {\n\t  var props = _ref.props,\n\t      current = _ref.current,\n\t      root = _ref.root,\n\t      search = _ref.search;\n\t  return Glamor.createElement(\n\t    'div',\n\t    { css: styles.container },\n\t    Glamor.createElement(\n\t      'div',\n\t      { css: styles.contents },\n\t      Glamor.createElement(\n\t        _Link2.default,\n\t        { css: [styles.link, { display: 'flex' }], to: search },\n\t        'Search',\n\t        Glamor.createElement(\n\t          'svg',\n\t          { css: styles.searchIcon, xmlns: 'http://www.w3.org/2000/svg', viewBox: '0 0 15 15' },\n\t          Glamor.createElement('path', { fill: _colors.text, d: 'M6.213 12.548C2.783 12.548 0 9.738 0 6.274 0 2.81 2.782 0 6.213 0c3.432 0 6.214 2.81 6.214 6.274 0 1.358-.428 2.616-1.154 3.643L15 13.482 13.576 15l-3.77-3.606c-1.015.727-2.254 1.154-3.593 1.154zm0-2.09c2.288 0 4.143-1.874 4.143-4.184S8.5 2.09 6.213 2.09c-2.287 0-4.142 1.874-4.142 4.184s1.856 4.183 4.143 4.183z' })\n\t        )\n\t      ),\n\t      Glamor.createElement(Node, { current: current, item: root, root: true, depth: 0 })\n\t    )\n\t  );\n\t};\n\t\n\tvar Node = function Node(_ref2) {\n\t  var current = _ref2.current,\n\t      root = _ref2.root,\n\t      _ref2$item = _ref2.item,\n\t      title = _ref2$item.title,\n\t      relativePath = _ref2$item.relativePath,\n\t      children = _ref2$item.children,\n\t      depth = _ref2.depth;\n\t\n\t  var linkStyles = [styles.link, styles['link' + depth], relativePath === current && styles.currentLink];\n\t  return children.length ? Glamor.createElement(\n\t    'div',\n\t    { css: [styles.node, root && styles.rootNode] },\n\t    !root ? Glamor.createElement(\n\t      _Link2.default,\n\t      { to: relativePath, css: linkStyles },\n\t      title\n\t    ) : null,\n\t    Glamor.createElement(\n\t      'ul',\n\t      { css: [styles.children, root && styles.rootChildren] },\n\t      children.map(function (child) {\n\t        return Glamor.createElement(\n\t          'li',\n\t          { style: styles.li, key: child.relativePath },\n\t          Glamor.createElement(Node, { current: current, item: child, depth: depth + 1 })\n\t        );\n\t      })\n\t    )\n\t  ) : Glamor.createElement(\n\t    _Link2.default,\n\t    { css: [styles.node, linkStyles], to: relativePath },\n\t    title\n\t  );\n\t};\n\t\n\texports.default = GuideSidebar;\n\tvar sidebarFragment = exports.sidebarFragment = '** extracted graphql fragment **';\n\t\n\tvar phablet = '@media(max-width: 800px)';\n\t\n\tvar styles = {\n\t  container: (_container = {\n\t    width: (0, _typography.rhythm)(8),\n\t    minHeight: '100%',\n\t    padding: '20px'\n\t  }, _defineProperty(_container, phablet, _extends({}, (0, _typography.scale)(0), {\n\t    width: 'auto'\n\t  })), _defineProperty(_container, 'fontFamily', (0, _typography.headerFontFamily)()), _defineProperty(_container, 'background', _colors.gray), _container),\n\t\n\t  contents: {\n\t    padding: (0, _typography.rhythm)(1 / 3) + ' ' + (0, _typography.rhythm)(1 / 2)\n\t  },\n\t\n\t  node: {},\n\t\n\t  li: {\n\t    margin: 0,\n\t    padding: 0\n\t  },\n\t\n\t  link: _extends({\n\t    textDecoration: 'none',\n\t    color: 'currentColor'\n\t  }, (0, _typography.scale)(-0.2), (_extends2 = {}, _defineProperty(_extends2, phablet, {\n\t    padding: '' + (0, _typography.rhythm)(1 / 4)\n\t  }), _defineProperty(_extends2, 'display', 'block'), _defineProperty(_extends2, ':hover', {\n\t    color: _colors.accent\n\t  }), _extends2)),\n\t\n\t  currentLink: {\n\t    textDecoration: 'underline',\n\t    textDecorationColor: _colors.accent,\n\t    color: _colors.accent\n\t  },\n\t\n\t  link1: {\n\t    fontWeight: 'bold',\n\t    marginTop: '1em',\n\t    marginBottom: '.25em'\n\t  },\n\t\n\t  children: {\n\t    listStyle: 'none',\n\t    margin: 0,\n\t    padding: 0,\n\t    paddingLeft: (0, _typography.rhythm)(1 / 3),\n\t    marginLeft: 0\n\t  },\n\t\n\t  rootChildren: {\n\t    borderLeft: 'none',\n\t    marginLeft: 0,\n\t    paddingLeft: 0\n\t  },\n\t\n\t  searchIcon: {\n\t    width: '15px',\n\t    height: '15px',\n\t    marginLeft: 'auto',\n\t    alignSelf: 'center'\n\t  }\n\t};\n\t\n\tvar fixPath = exports.fixPath = function fixPath(relativePath) {\n\t  if (relativePath.match(/\\/index\\.md$/)) {\n\t    return '/' + relativePath.slice(0, -'/index.md'.length);\n\t  }\n\t  return '/' + relativePath.slice(0, -'.md'.length);\n\t};\n\t\n\tvar parseData = function parseData(nodes) {\n\t  return nodes.map(function (_ref3) {\n\t    var relativePath = _ref3.relativePath,\n\t        _ref3$childMarkdownRe = _ref3.childMarkdownRemark.frontmatter,\n\t        title = _ref3$childMarkdownRe.title,\n\t        order = _ref3$childMarkdownRe.order;\n\t    return { relativePath: fixPath(relativePath), title: title, order: order };\n\t  });\n\t};\n\t\n\tvar values = function values(obj) {\n\t  return Object.keys(obj).map(function (k) {\n\t    return obj[k];\n\t  });\n\t};\n\t\n\tvar listify = function listify(node) {\n\t  return _extends({}, node, {\n\t    children: values(node.children).sort(function (a, b) {\n\t      return a.order - b.order;\n\t    }).map(listify)\n\t  });\n\t};\n\t\n\tvar constructTree = exports.constructTree = function constructTree(section, files) {\n\t  var tree = { children: {} };\n\t  parseData(files).forEach(function (_ref4) {\n\t    var relativePath = _ref4.relativePath,\n\t        title = _ref4.title,\n\t        order = _ref4.order;\n\t\n\t    var parts = relativePath.split(/\\//g).slice(1);\n\t    var last = parts.pop();\n\t    var parent = tree;\n\t    parts.forEach(function (part) {\n\t      if (!parent.children[part]) parent.children[part] = { children: {} };\n\t      parent = parent.children[part];\n\t    });\n\t    parent.children[last] = _extends({\n\t      children: {}\n\t    }, parent.children[last], {\n\t      relativePath: relativePath,\n\t      title: title,\n\t      order: order\n\t    });\n\t  });\n\t\n\t  var sectionPath = section.split('/');\n\t  var treeToListify = sectionPath.reduce(function (acc, section, i) {\n\t    return i === sectionPath.length - 1 ? acc[section] : acc[section].children;\n\t  }, tree.children);\n\t\n\t  return listify(treeToListify);\n\t};\n\t\n\t// TODO\n\t// export const query =\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/glamor-react/lib/index.js\")))\n\n/***/ }),\n\n/***/ \"./node_modules/babel-loader/lib/index.js?{\\\"plugins\\\":[\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js\\\",\\\"add-module-exports\\\",\\\"add-module-exports\\\",\\\"transform-object-assign\\\",[\\\"transform-react-jsx\\\",{\\\"pragma\\\":\\\"Glamor.createElement\\\"}],\\\"babel-plugin-glamor\\\"],\\\"presets\\\":[\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-env/lib/index.js\\\",\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-stage-0/lib/index.js\\\",\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-react/lib/index.js\\\"],\\\"cacheDirectory\\\":true}!./src/templates/Search.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Glamor) {\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.pageQuery = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(\"./node_modules/react/react.js\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactHelmet = __webpack_require__(\"./node_modules/react-helmet/lib/Helmet.js\");\n\t\n\tvar _reactHelmet2 = _interopRequireDefault(_reactHelmet);\n\t\n\tvar _Section = __webpack_require__(\"./src/components/Section.js\");\n\t\n\tvar _Section2 = _interopRequireDefault(_Section);\n\t\n\tvar _GuideSidebar = __webpack_require__(\"./src/components/GuideSidebar.js\");\n\t\n\tvar _GuideSidebar2 = _interopRequireDefault(_GuideSidebar);\n\t\n\tvar _colors = __webpack_require__(\"./src/utils/colors.js\");\n\t\n\tvar _typography = __webpack_require__(\"./src/utils/typography.js\");\n\t\n\tvar _Link = __webpack_require__(\"./src/components/Link.js\");\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _Header = __webpack_require__(\"./src/components/Header.js\");\n\t\n\tvar _Header2 = _interopRequireDefault(_Header);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar walk = function walk(node, fn) {\n\t  [].forEach.call(node.childNodes, function (child) {\n\t    var res = fn(child);\n\t    if (res) {\n\t      node.replaceChild(res, child);\n\t    } else {\n\t      walk(child, fn);\n\t    }\n\t  });\n\t};\n\t\n\tvar highlightContents = function highlightContents(node, needle) {\n\t  walk(node, function (child) {\n\t    if (child.nodeName === '#text') {\n\t      if (child.nodeValue.match(needle)) {\n\t        var _node = document.createElement('span');\n\t        _node.innerHTML = child.nodeValue.replace(needle, function (v) {\n\t          return '<span class=\"search-highlighted-result\">' + v + '</span>';\n\t        });\n\t        return _node;\n\t      }\n\t    }\n\t  });\n\t};\n\t\n\tvar highlight = function highlight(html, needle) {\n\t  var tmp = document.createElement('div');\n\t  tmp.innerHTML = html;\n\t  var matching = [null];\n\t  ;[].forEach.call(tmp.childNodes, function (node) {\n\t    if (node.textContent.match(needle)) {\n\t      highlightContents(node, needle);\n\t      matching.push(node.outerHTML);\n\t    } else if (matching[matching.length - 1] !== null) {\n\t      matching.push(null);\n\t    }\n\t  });\n\t  if (matching[0] === null) matching.shift();\n\t  if (matching[matching.length - 1] === null) matching.pop();\n\t  return matching.map(function (m) {\n\t    return m === null ? '<p class=\"search-elided-section\">...</p>' : m;\n\t  }).join('\\n');\n\t};\n\t\n\tvar search = function search(edges, needle) {\n\t  var rx = new RegExp(needle, 'ig');\n\t  return edges.filter(function (_ref) {\n\t    var _ref$node$childMarkdo = _ref.node.childMarkdownRemark,\n\t        html = _ref$node$childMarkdo.html,\n\t        title = _ref$node$childMarkdo.frontmatter.title;\n\t\n\t    if (title.match(rx) || html.match(rx)) {\n\t      return true;\n\t    }\n\t  }).map(function (_ref2) {\n\t    var _ref2$node = _ref2.node,\n\t        relativePath = _ref2$node.relativePath,\n\t        _ref2$node$childMarkd = _ref2$node.childMarkdownRemark,\n\t        html = _ref2$node$childMarkd.html,\n\t        title = _ref2$node$childMarkd.frontmatter.title;\n\t\n\t    return {\n\t      relativePath: relativePath,\n\t      html: highlight(html, needle),\n\t      // html: html.replace(rx, v => '<span style=\"font-weight: bold; background-color: red\">' + v + '</span>'),\n\t      title: title // TODO highlight cleverly, probably use the markdown\n\t      // source instead\n\t    };\n\t  });\n\t};\n\t\n\tvar Search = function (_React$Component) {\n\t  _inherits(Search, _React$Component);\n\t\n\t  function Search(props) {\n\t    _classCallCheck(this, Search);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Search.__proto__ || Object.getPrototypeOf(Search)).call(this));\n\t\n\t    _initialiseProps.call(_this);\n\t\n\t    var text = decodeURIComponent(props.location.search.slice(1));\n\t    _this.state = {\n\t      results: text.trim().length > 2 ? search(props.data.allFile.edges, text.toLowerCase()) : [],\n\t      searchText: text\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Search, [{\n\t    key: \"componentDidMount\",\n\t    value: function componentDidMount() {\n\t      this.input.focus();\n\t    }\n\t  }, {\n\t    key: \"renderMain\",\n\t    value: function renderMain() {\n\t      var _this2 = this;\n\t\n\t      return Glamor.createElement(\n\t        \"div\",\n\t        { css: styles.container },\n\t        Glamor.createElement(\n\t          \"div\",\n\t          { css: styles.searchBar },\n\t          \"Search\",\n\t          Glamor.createElement(\"input\", {\n\t            ref: function ref(input) {\n\t              return _this2.input = input;\n\t            },\n\t            css: styles.searchInput,\n\t            onChange: function onChange(e) {\n\t              return _this2.setText(e.target.value);\n\t            },\n\t            value: this.state.searchText,\n\t            type: \"text\"\n\t          })\n\t        ),\n\t        Glamor.createElement(\n\t          \"div\",\n\t          { css: styles.results },\n\t          this.state.results.slice(0, 10).map(function (result) {\n\t            return Glamor.createElement(\n\t              \"div\",\n\t              { key: result.relativePath, css: styles.result },\n\t              Glamor.createElement(\n\t                \"h4\",\n\t                { css: styles.resultTitleWrapper },\n\t                Glamor.createElement(\n\t                  _Link2.default,\n\t                  { css: styles.resultTitle, to: (0, _GuideSidebar.fixPath)(result.relativePath) },\n\t                  \"\\u2023 \",\n\t                  result.title\n\t                )\n\t              ),\n\t              Glamor.createElement(\"div\", {\n\t                css: styles.resultBody,\n\t                dangerouslySetInnerHTML: { __html: result.html }\n\t              })\n\t            );\n\t          })\n\t        )\n\t      );\n\t    }\n\t  }, {\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _props$pathContext = this.props.pathContext,\n\t          section = _props$pathContext.section,\n\t          sectionTitle = _props$pathContext.sectionTitle;\n\t      var allFile = this.props.data.allFile;\n\t\n\t      return Glamor.createElement(\n\t        \"div\",\n\t        null,\n\t        Glamor.createElement(_reactHelmet2.default, { title: sectionTitle + \" Search\" }),\n\t        Glamor.createElement(\n\t          _Section2.default,\n\t          { backgroundColor: _colors.accent, css: { color: 'white' } },\n\t          Glamor.createElement(_Header2.default, { inverted: true }),\n\t          Glamor.createElement(\n\t            \"div\",\n\t            { css: { alignItems: 'center' } },\n\t            Glamor.createElement(\n\t              \"h1\",\n\t              null,\n\t              Glamor.createElement(\n\t                _Link2.default,\n\t                { css: styles.topLink, to: \"/\" + section },\n\t                sectionTitle\n\t              )\n\t            )\n\t          )\n\t        ),\n\t        Glamor.createElement(\n\t          _Section2.default,\n\t          { css: styles.contentSection },\n\t          Glamor.createElement(\n\t            \"div\",\n\t            { css: styles.sidebar },\n\t            Glamor.createElement(_GuideSidebar2.default, {\n\t              current: section + \"/search\",\n\t              search: \"/\" + section + \"/search\",\n\t              root: (0, _GuideSidebar.constructTree)(section, allFile.edges.map(function (edge) {\n\t                return edge.node;\n\t              }))\n\t            })\n\t          ),\n\t          this.renderMain()\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Search;\n\t}(_react2.default.Component);\n\t\n\tvar _initialiseProps = function _initialiseProps() {\n\t  var _this3 = this;\n\t\n\t  this.setText = function (text) {\n\t    window.history.replaceState({}, document.title, window.location.pathname + '?' + text);\n\t    _this3.setState({\n\t      searchText: text,\n\t      results: text.trim().length > 2 ? search(_this3.props.data.allFile.edges, text.toLowerCase()) : []\n\t    });\n\t  };\n\t};\n\t\n\texports.default = Search;\n\t\n\t\n\tvar styles = {\n\t  container: {\n\t    flex: 1,\n\t    flexShrink: 1\n\t  },\n\t  editLink: {\n\t    fontSize: '14px',\n\t    fontWeight: 'normal',\n\t    lineHeight: '25px'\n\t  },\n\t  title: {\n\t    borderBottom: '1px solid ' + _colors.dividerLine,\n\t    display: 'flex',\n\t    flexDirection: 'row',\n\t    justifyContent: 'space-between',\n\t    alignItems: 'flex-end'\n\t  },\n\t  contentSection: {\n\t    flexDirection: 'row',\n\t    '@media(max-width: 800px)': {\n\t      flexDirection: 'column-reverse'\n\t    }\n\t  },\n\t  sidebar: {\n\t    // padding: '2em',\n\t  },\n\t  main: {\n\t    position: 'relative',\n\t    flex: 1,\n\t    padding: '2em',\n\t    minWidth: 0\n\t  },\n\t\n\t  searchBar: {\n\t    flexDirection: 'row',\n\t    alignItems: 'center',\n\t    padding: 10\n\t  },\n\t\n\t  searchInput: {\n\t    flex: 1,\n\t    padding: '5px 10px',\n\t    fontSize: 18,\n\t    marginLeft: 10\n\t  },\n\t\n\t  results: {\n\t    padding: 10\n\t  },\n\t\n\t  result: {},\n\t\n\t  resultTitle: {\n\t    fontWeight: 'bold'\n\t  },\n\t\n\t  resultTitleWrapper: {\n\t    marginBottom: (0, _typography.rhythm)(0.5)\n\t  },\n\t\n\t  resultBody: {\n\t    fontSize: 12,\n\t    paddingLeft: 20,\n\t    '& .search-highlighted-result': {\n\t      backgroundColor: 'gold',\n\t      fontWeight: 'bold'\n\t    },\n\t    '& p': {\n\t      marginBottom: 10\n\t    },\n\t    '& .search-elided-section': {\n\t      color: '#aaa',\n\t      height: 5,\n\t      marginBottom: 15,\n\t      marginTop: -10\n\t    },\n\t    '& ul': {\n\t      marginBottom: 5\n\t    },\n\t    '& code': {\n\t      fontSize: 'inherit'\n\t    }\n\t  }\n\t\n\t};\n\t\n\tvar pageQuery = exports.pageQuery = \"** extracted graphql fragment **\";\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/glamor-react/lib/index.js\")))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// page-component---src-templates-search-js-4bd0cf48d27123ebc867.js","import React from 'react'\nimport Link from './Link'\n\nimport {scale, rhythm, headerFontFamily} from '../utils/typography'\nimport {text, accent, dividerLine, gray} from '../utils/colors'\n\nconst GuideSidebar = ({props, current, root, search}) => (\n  <div css={styles.container}>\n    <div css={styles.contents}>\n      <Link css={[styles.link, {display: 'flex'}]} to={search}>\n        Search\n        <svg css={styles.searchIcon} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 15 15\">\n          <path fill={text} d=\"M6.213 12.548C2.783 12.548 0 9.738 0 6.274 0 2.81 2.782 0 6.213 0c3.432 0 6.214 2.81 6.214 6.274 0 1.358-.428 2.616-1.154 3.643L15 13.482 13.576 15l-3.77-3.606c-1.015.727-2.254 1.154-3.593 1.154zm0-2.09c2.288 0 4.143-1.874 4.143-4.184S8.5 2.09 6.213 2.09c-2.287 0-4.142 1.874-4.142 4.184s1.856 4.183 4.143 4.183z\"></path>\n        </svg>\n      </Link>\n      <Node current={current} item={root} root depth={0} />\n    </div>\n  </div>\n)\n\nconst Node = ({current, root, item: {title, relativePath, children}, depth}) => {\n  const linkStyles = [styles.link, styles['link' + depth], relativePath === current && styles.currentLink]\n  return children.length\n  ? <div css={[styles.node, root && styles.rootNode]}>\n      {!root ? <Link to={relativePath} css={linkStyles}>{title}</Link> : null}\n      <ul css={[styles.children, root && styles.rootChildren]}>\n      {children.map(child => <li style={styles.li} key={child.relativePath}><Node current={current} item={child} depth={depth + 1} /></li>)}\n      </ul>\n    </div>\n  : <Link css={[styles.node, linkStyles]} to={relativePath}>{title}</Link>\n}\n\nexport default GuideSidebar\n\nexport const sidebarFragment = graphql`\n  fragment guideSidebar on RootQueryType {\n    allFile(filter:{\n      relativePath:{regex:$relatedFiles}\n    }) {\n      edges{\n        node{\n          relativePath\n          childMarkdownRemark{\n            frontmatter{\n              title\n              order\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst phablet = '@media(max-width: 800px)'\n\nconst styles = {\n  container: {\n    width: rhythm(8),\n    minHeight: '100%',\n    padding: '20px',\n    [phablet]: {\n      ...scale(0),\n      width: 'auto',\n    },\n    fontFamily: headerFontFamily(),\n    background: gray\n  },\n\n  contents: {\n    padding: `${rhythm(1/3)} ${rhythm(1/2)}`,\n  },\n\n  node: {\n\n  },\n\n  li: {\n    margin: 0,\n    padding: 0,\n  },\n\n  link: {\n    textDecoration: 'none',\n    color: 'currentColor',\n    ...scale(-0.2),\n    [phablet]: {\n      padding: `${rhythm(1/4)}`\n    },\n    display: 'block',\n    ':hover': {\n      color: accent,\n    }\n  },\n\n  currentLink: {\n    textDecoration: 'underline',\n    textDecorationColor: accent,\n    color: accent,\n  },\n\n  link1: {\n    fontWeight: 'bold',\n    marginTop: '1em',\n    marginBottom: '.25em',\n  },\n\n  children: {\n    listStyle: 'none',\n    margin: 0,\n    padding: 0,\n    paddingLeft: rhythm(1/3),\n    marginLeft: 0,\n  },\n\n  rootChildren: {\n    borderLeft: 'none',\n    marginLeft: 0,\n    paddingLeft: 0,\n  },\n\n  searchIcon: {\n    width: '15px',\n    height: '15px',\n    marginLeft: 'auto',\n    alignSelf: 'center'\n  }\n}\n\n\nexport const fixPath = relativePath => {\n  if (relativePath.match(/\\/index\\.md$/)) {\n    return '/' + relativePath.slice(0, -'/index.md'.length)\n  }\n  return '/' + relativePath.slice(0, -'.md'.length)\n}\n\nconst parseData = nodes => nodes.map(({\n  relativePath,\n  childMarkdownRemark: {frontmatter: {title, order}}\n}) => ({relativePath: fixPath(relativePath), title, order}))\n\nconst values = obj => Object.keys(obj).map(k => obj[k])\n\nconst listify = node => ({\n  ...node,\n  children: values(node.children)\n    .sort((a, b) => a.order - b.order)\n    .map(listify)\n})\n\nexport const constructTree = (section, files) => {\n  const tree = {children: {}}\n  parseData(files).forEach(({relativePath, title, order}) => {\n    const parts = relativePath.split(/\\//g).slice(1)\n    const last = parts.pop()\n    let parent = tree\n    parts.forEach(part => {\n      if (!parent.children[part]) parent.children[part] = {children: {}}\n      parent = parent.children[part]\n    })\n    parent.children[last] = {\n      children: {},\n      ...parent.children[last],\n      relativePath,\n      title,\n      order,\n    }\n  })\n\n  const sectionPath = section.split('/');\n  const treeToListify = sectionPath.reduce(\n    (acc, section, i) => i === sectionPath.length - 1\n      ? acc[section]\n      : acc[section].children,\n    tree.children,\n  )\n\n  return listify(treeToListify)\n}\n\n// TODO\n// export const query =\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GuideSidebar.js","import React from \"react\"\nimport Helmet from \"react-helmet\"\n\nimport Section from '../components/Section'\nimport GuideSidebar, {constructTree, fixPath} from '../components/GuideSidebar'\nimport {accent, gray, dividerLine} from '../utils/colors'\nimport {rhythm} from '../utils/typography'\n\nimport Link from \"../components/Link\"\nimport Header from '../components/Header'\n\nconst walk = (node, fn) => {\n  [].forEach.call(node.childNodes, child => {\n    const res = fn(child)\n    if (res) {\n      node.replaceChild(res, child)\n    } else {\n      walk(child, fn)\n    }\n  })\n}\n\nconst highlightContents = (node, needle) => {\n  walk(node, child => {\n    if (child.nodeName === '#text') {\n      if (child.nodeValue.match(needle)) {\n        const node = document.createElement('span')\n        node.innerHTML = child.nodeValue.replace(needle, v => '<span class=\"search-highlighted-result\">' + v + '</span>')\n        return node\n      }\n    }\n  })\n}\n\nconst highlight = (html, needle) => {\n  const tmp = document.createElement('div')\n  tmp.innerHTML = html;\n  const matching = [null];\n  ;[].forEach.call(tmp.childNodes, node => {\n    if (node.textContent.match(needle)) {\n      highlightContents(node, needle)\n      matching.push(node.outerHTML)\n    } else if (matching[matching.length - 1] !== null) {\n      matching.push(null)\n    }\n  })\n  if (matching[0] === null) matching.shift()\n  if (matching[matching.length - 1] === null) matching.pop()\n  return matching.map(m => m === null ? '<p class=\"search-elided-section\">...</p>' : m).join('\\n')\n}\n\nconst search = (edges, needle) => {\n  const rx = new RegExp(needle, 'ig')\n  return edges.filter(({node: {childMarkdownRemark: {html, frontmatter: {title}}}}) => {\n    if (title.match(rx) || html.match(rx)) {\n      return true\n    }\n  }).map(({node: {relativePath, childMarkdownRemark: {html, frontmatter: {title}}}}) => {\n    return {\n      relativePath,\n      html: highlight(html, needle),\n      // html: html.replace(rx, v => '<span style=\"font-weight: bold; background-color: red\">' + v + '</span>'),\n      title,\n    } // TODO highlight cleverly, probably use the markdown\n    // source instead\n  })\n}\n\nexport default class Search extends React.Component {\n  constructor(props) {\n    super()\n    const text = decodeURIComponent(props.location.search.slice(1))\n    this.state = {\n      results: text.trim().length > 2 ? search(props.data.allFile.edges, text.toLowerCase()) : [],\n      searchText: text,\n    }\n  }\n\n  setText = text => {\n    window.history.replaceState({}, document.title, window.location.pathname + '?' + text)\n    this.setState({\n      searchText: text,\n      results: text.trim().length > 2 ? search(this.props.data.allFile.edges, text.toLowerCase()) : []\n    })\n  }\n\n  componentDidMount() {\n    this.input.focus()\n  }\n\n  renderMain() {\n    return <div css={styles.container}>\n      <div css={styles.searchBar}>\n        Search\n        <input\n          ref={input => this.input = input}\n          css={styles.searchInput}\n          onChange={e => this.setText(e.target.value)}\n          value={this.state.searchText}\n          type=\"text\"\n        />\n      </div>\n      <div css={styles.results}>\n        {this.state.results.slice(0, 10).map(result => (\n          <div key={result.relativePath} css={styles.result}>\n            <h4 css={styles.resultTitleWrapper}>\n              <Link css={styles.resultTitle} to={fixPath(result.relativePath)}>\n                â€£ {result.title}\n              </Link>\n            </h4>\n            <div\n              css={styles.resultBody}\n              dangerouslySetInnerHTML={{__html: result.html}}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  }\n\n  render() {\n    const {section, sectionTitle} = this.props.pathContext\n    const {allFile} = this.props.data\n    return <div>\n      <Helmet title={`${sectionTitle} Search`} />\n      <Section backgroundColor={accent} css={{color: 'white'}}>\n        <Header inverted />\n        <div css={{alignItems: 'center'}}>\n          <h1>\n            <Link css={styles.topLink} to={`/${section}`}>\n              {sectionTitle}\n            </Link>\n          </h1>\n        </div>\n      </Section>\n      <Section css={styles.contentSection}>\n        <div css={styles.sidebar}>\n          <GuideSidebar\n            current={`${section}/search`}\n            search={`/${section}/search`}\n            root={constructTree(section, allFile.edges.map(edge => edge.node))}\n          />\n        </div>\n        {this.renderMain()}\n      </Section>\n    </div>\n  }\n}\n\nconst styles = {\n  container: {\n    flex: 1,\n    flexShrink: 1,\n  },\n  editLink: {\n    fontSize: '14px',\n    fontWeight: 'normal',\n    lineHeight: '25px',\n  },\n  title: {\n    borderBottom: '1px solid ' + dividerLine,\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end',\n  },\n  contentSection: {\n    flexDirection: 'row',\n    '@media(max-width: 800px)': {\n      flexDirection: 'column-reverse',\n    },\n  },\n  sidebar: {\n    // padding: '2em',\n  },\n  main: {\n    position: 'relative',\n    flex: 1,\n    padding: '2em',\n    minWidth: 0,\n  },\n\n  searchBar: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 10,\n  },\n\n  searchInput: {\n    flex: 1,\n    padding: '5px 10px',\n    fontSize: 18,\n    marginLeft: 10,\n  },\n\n  results: {\n    padding: 10,\n  },\n\n  result: {\n\n  },\n\n  resultTitle: {\n    fontWeight: 'bold',\n  },\n\n  resultTitleWrapper: {\n    marginBottom: rhythm(0.5),\n  },\n\n  resultBody: {\n    fontSize: 12,\n    paddingLeft: 20,\n    '& .search-highlighted-result': {\n      backgroundColor: 'gold',\n      fontWeight: 'bold',\n    },\n    '& p': {\n      marginBottom: 10,\n    },\n    '& .search-elided-section': {\n      color: '#aaa',\n      height: 5,\n      marginBottom: 15,\n      marginTop: -10,\n    },\n    '& ul': {\n      marginBottom: 5,\n    },\n    '& code': {\n      fontSize: 'inherit',\n    }\n  }\n\n}\n\nexport const pageQuery = graphql`\n  query SearchPage($relatedFiles: String!) {\n    allFile(filter:{\n      relativePath:{regex:$relatedFiles}\n    }) {\n      edges{\n        node{\n          relativePath\n          childMarkdownRemark {\n            frontmatter {\n              title\n              order\n            }\n            html\n          }\n        }\n      }\n    }\n  }\n`\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/Search.js"],"sourceRoot":""}