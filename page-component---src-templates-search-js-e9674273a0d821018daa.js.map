{"version":3,"sources":["webpack:///page-component---src-templates-search-js-e9674273a0d821018daa.js","webpack:///./src/components/GuideSidebar.js?7c5b","webpack:///./src/templates/Search.js"],"names":["webpackJsonp","./src/components/GuideSidebar.js","module","exports","__webpack_require__","Glamor","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","constructTree","fixPath","sidebarFragment","undefined","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_react","_react2","_Link","_Link2","_colors","GuideSidebar","_React$Component","_ref","_temp","_this","_ret","this","_len","args","Array","_key","getPrototypeOf","apply","concat","state","closed","nextProps","current","setState","_this2","createElement","css","styles","container","navToggle","onClick","contents","hiddenContents","to","search","Node","item","root","depth","Component","_ref2","_ref2$item","title","relativePath","children","linkStyles","link","currentLink","node","rootNode","rootChildren","map","child","style","li","width","fontSize","lineHeight","@media(max-width: 800px)","padding","display","backgroundColor","color","alignSelf","cursor","margin","textDecoration","paddingBottom","paddingTop","textDecorationColor","link1","fontWeight","listStyle","paddingLeft","marginLeft","borderLeft","match","slice","parseData","nodes","_ref3","_ref3$childMarkdownRe","childMarkdownRemark","frontmatter","order","values","keys","k","listify","sort","a","b","section","files","tree","forEach","_ref4","parts","split","last","pop","parent","part","./node_modules/babel-loader/lib/index.js?{\"plugins\":[\"/Users/chenglou/Github/reasonml.github.io/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js\",\"add-module-exports\",\"add-module-exports\",\"transform-object-assign\",[\"transform-react-jsx\",{\"pragma\":\"Glamor.createElement\"}],\"babel-plugin-glamor\"],\"presets\":[\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-env/lib/index.js\",\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-stage-0/lib/index.js\",\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-react/lib/index.js\"],\"cacheDirectory\":true}!./src/templates/Search.js","pageQuery","_reactHelmet","_reactHelmet2","_Section","_Section2","_GuideSidebar","_GuideSidebar2","_Header","_Header2","walk","fn","childNodes","res","replaceChild","highlightContents","needle","nodeName","nodeValue","document","innerHTML","replace","v","highlight","html","tmp","matching","textContent","push","outerHTML","shift","m","join","edges","rx","RegExp","filter","_ref$node$childMarkdo","_ref2$node","_ref2$node$childMarkd","Search","_initialiseProps","text","decodeURIComponent","location","results","trim","data","allFile","toLowerCase","searchText","input","focus","searchBar","ref","searchInput","onChange","e","setText","type","result","resultTitle","resultBody","dangerouslySetInnerHTML","__html","_props$pathContext","pathContext","sectionTitle","accent","inverted","alignItems","topLink","contentSection","sidebar","edge","renderMain","_this3","window","history","replaceState","pathname","flex","flexShrink","editLink","borderBottom","flexDirection","justifyContent","main","position","minWidth","& .search-highlighted-result","& p","marginBottom","& .search-elided-section","height","marginTop","& ul","& code"],"mappings":"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","file":"page-component---src-templates-search-js-e9674273a0d821018daa.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ \"./src/components/GuideSidebar.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Glamor) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.constructTree = exports.fixPath = exports.sidebarFragment = undefined;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(\"./node_modules/react/react.js\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _Link = __webpack_require__(\"./src/components/Link.js\");\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _colors = __webpack_require__(\"./src/utils/colors.js\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar GuideSidebar = function (_React$Component) {\n\t  _inherits(GuideSidebar, _React$Component);\n\t\n\t  function GuideSidebar() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, GuideSidebar);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = GuideSidebar.__proto__ || Object.getPrototypeOf(GuideSidebar)).call.apply(_ref, [this].concat(args))), _this), _this.state = { closed: true }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  _createClass(GuideSidebar, [{\n\t    key: 'componentWillReceiveProps',\n\t    value: function componentWillReceiveProps(nextProps) {\n\t      if (nextProps.current !== this.props.current) {\n\t        this.setState({ closed: true });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this2 = this;\n\t\n\t      return Glamor.createElement(\n\t        'div',\n\t        { css: styles.container },\n\t        Glamor.createElement(\n\t          'div',\n\t          {\n\t            css: styles.navToggle,\n\t            onClick: function onClick() {\n\t              return _this2.setState({ closed: !_this2.state.closed });\n\t            }\n\t          },\n\t          'Navigation'\n\t        ),\n\t        Glamor.createElement(\n\t          'div',\n\t          { css: [styles.contents, this.state.closed && styles.hiddenContents] },\n\t          Glamor.createElement(\n\t            _Link2.default,\n\t            { to: this.props.search },\n\t            'Search'\n\t          ),\n\t          Glamor.createElement(Node, { current: this.props.current, item: this.props.root, root: true, depth: 0 })\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return GuideSidebar;\n\t}(_react2.default.Component);\n\t\n\texports.default = GuideSidebar;\n\t\n\t\n\tvar Node = function Node(_ref2) {\n\t  var current = _ref2.current,\n\t      root = _ref2.root,\n\t      _ref2$item = _ref2.item,\n\t      title = _ref2$item.title,\n\t      relativePath = _ref2$item.relativePath,\n\t      children = _ref2$item.children,\n\t      depth = _ref2.depth;\n\t\n\t  var linkStyles = [styles.link, styles['link' + depth], relativePath === current && styles.currentLink];\n\t  return children.length ? Glamor.createElement(\n\t    'div',\n\t    { css: [styles.node, root && styles.rootNode] },\n\t    !root ? Glamor.createElement(\n\t      _Link2.default,\n\t      { to: relativePath, css: linkStyles },\n\t      title\n\t    ) : null,\n\t    Glamor.createElement(\n\t      'ul',\n\t      { css: [styles.children, root && styles.rootChildren] },\n\t      children.map(function (child) {\n\t        return Glamor.createElement(\n\t          'li',\n\t          { style: styles.li, key: child.relativePath },\n\t          Glamor.createElement(Node, { current: current, item: child, depth: depth + 1 })\n\t        );\n\t      })\n\t    )\n\t  ) : Glamor.createElement(\n\t    _Link2.default,\n\t    { css: [styles.node, linkStyles], to: relativePath },\n\t    title\n\t  );\n\t};\n\t\n\tvar sidebarFragment = exports.sidebarFragment = '** extracted graphql fragment **';\n\t\n\tvar styles = {\n\t  container: {\n\t    width: 200,\n\t    fontSize: 14,\n\t    lineHeight: '14px',\n\t    '@media(max-width: 800px)': {\n\t      width: 'auto'\n\t    }\n\t  },\n\t\n\t  contents: {\n\t    padding: '2em'\n\t  },\n\t\n\t  hiddenContents: {\n\t    '@media(max-width: 800px)': {\n\t      display: 'none'\n\t    }\n\t  },\n\t\n\t  navToggle: {\n\t    backgroundColor: '#444',\n\t    color: 'white',\n\t    padding: '1em 2em',\n\t    alignSelf: 'stretch',\n\t    display: 'none',\n\t    cursor: 'pointer',\n\t    '@media(max-width: 800px)': {\n\t      display: 'flex'\n\t    }\n\t  },\n\t\n\t  node: {},\n\t\n\t  li: {\n\t    margin: 0,\n\t    padding: 0\n\t  },\n\t\n\t  link: {\n\t    textDecoration: 'none',\n\t    color: 'currentColor',\n\t    lineHeight: '1.2em',\n\t    paddingBottom: 3,\n\t    paddingTop: 5,\n\t    display: 'block'\n\t  },\n\t\n\t  currentLink: {\n\t    textDecoration: 'underline',\n\t    textDecorationColor: _colors.accent,\n\t    color: _colors.accent\n\t  },\n\t\n\t  link1: {\n\t    fontWeight: 'bold',\n\t    fontSize: '1.2em',\n\t    lineHeight: '1.2em'\n\t    // paddingBottom: 10,\n\t    // marginTop: 5,\n\t  },\n\t\n\t  rootNode: {},\n\t\n\t  children: {\n\t    listStyle: 'none',\n\t    margin: 0,\n\t    padding: 0,\n\t    paddingLeft: 15,\n\t    marginLeft: 0,\n\t    borderLeft: '1px solid #aaa'\n\t  },\n\t\n\t  rootChildren: {\n\t    borderLeft: 'none',\n\t    marginLeft: 0,\n\t    paddingLeft: 0\n\t  }\n\t};\n\t\n\tvar fixPath = exports.fixPath = function fixPath(relativePath) {\n\t  if (relativePath.match(/\\/index\\.md$/)) {\n\t    return '/' + relativePath.slice(0, -'/index.md'.length);\n\t  }\n\t  return '/' + relativePath.slice(0, -'.md'.length);\n\t};\n\t\n\tvar parseData = function parseData(nodes) {\n\t  return nodes.map(function (_ref3) {\n\t    var relativePath = _ref3.relativePath,\n\t        _ref3$childMarkdownRe = _ref3.childMarkdownRemark.frontmatter,\n\t        title = _ref3$childMarkdownRe.title,\n\t        order = _ref3$childMarkdownRe.order;\n\t    return { relativePath: fixPath(relativePath), title: title, order: order };\n\t  });\n\t};\n\t\n\tvar values = function values(obj) {\n\t  return Object.keys(obj).map(function (k) {\n\t    return obj[k];\n\t  });\n\t};\n\t\n\tvar listify = function listify(node) {\n\t  return _extends({}, node, {\n\t    children: values(node.children).sort(function (a, b) {\n\t      return a.order - b.order;\n\t    }).map(listify)\n\t  });\n\t};\n\t\n\tvar constructTree = exports.constructTree = function constructTree(section, files) {\n\t  var tree = { children: {} };\n\t  parseData(files).forEach(function (_ref4) {\n\t    var relativePath = _ref4.relativePath,\n\t        title = _ref4.title,\n\t        order = _ref4.order;\n\t\n\t    var parts = relativePath.split(/\\//g).slice(1);\n\t    var last = parts.pop();\n\t    var parent = tree;\n\t    parts.forEach(function (part) {\n\t      if (!parent.children[part]) parent.children[part] = { children: {} };\n\t      parent = parent.children[part];\n\t    });\n\t    parent.children[last] = _extends({\n\t      children: {}\n\t    }, parent.children[last], {\n\t      relativePath: relativePath,\n\t      title: title,\n\t      order: order\n\t    });\n\t  });\n\t  return listify(tree.children[section]);\n\t};\n\t\n\t// TODO\n\t// export const query =\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/glamor-react/lib/index.js\")))\n\n/***/ }),\n\n/***/ \"./node_modules/babel-loader/lib/index.js?{\\\"plugins\\\":[\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/gatsby/dist/utils/babel-plugin-extract-graphql.js\\\",\\\"add-module-exports\\\",\\\"add-module-exports\\\",\\\"transform-object-assign\\\",[\\\"transform-react-jsx\\\",{\\\"pragma\\\":\\\"Glamor.createElement\\\"}],\\\"babel-plugin-glamor\\\"],\\\"presets\\\":[\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-env/lib/index.js\\\",\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-stage-0/lib/index.js\\\",\\\"/Users/chenglou/Github/reasonml.github.io/node_modules/babel-preset-react/lib/index.js\\\"],\\\"cacheDirectory\\\":true}!./src/templates/Search.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(Glamor) {\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.pageQuery = undefined;\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(\"./node_modules/react/react.js\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactHelmet = __webpack_require__(\"./node_modules/react-helmet/lib/Helmet.js\");\n\t\n\tvar _reactHelmet2 = _interopRequireDefault(_reactHelmet);\n\t\n\tvar _Section = __webpack_require__(\"./src/components/Section.js\");\n\t\n\tvar _Section2 = _interopRequireDefault(_Section);\n\t\n\tvar _GuideSidebar = __webpack_require__(\"./src/components/GuideSidebar.js\");\n\t\n\tvar _GuideSidebar2 = _interopRequireDefault(_GuideSidebar);\n\t\n\tvar _colors = __webpack_require__(\"./src/utils/colors.js\");\n\t\n\tvar _Link = __webpack_require__(\"./src/components/Link.js\");\n\t\n\tvar _Link2 = _interopRequireDefault(_Link);\n\t\n\tvar _Header = __webpack_require__(\"./src/components/Header.js\");\n\t\n\tvar _Header2 = _interopRequireDefault(_Header);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar walk = function walk(node, fn) {\n\t  [].forEach.call(node.childNodes, function (child) {\n\t    var res = fn(child);\n\t    if (res) {\n\t      node.replaceChild(res, child);\n\t    } else {\n\t      walk(child, fn);\n\t    }\n\t  });\n\t};\n\t\n\tvar highlightContents = function highlightContents(node, needle) {\n\t  walk(node, function (child) {\n\t    if (child.nodeName === '#text') {\n\t      if (child.nodeValue.match(needle)) {\n\t        var _node = document.createElement('span');\n\t        _node.innerHTML = child.nodeValue.replace(needle, function (v) {\n\t          return '<span class=\"search-highlighted-result\">' + v + '</span>';\n\t        });\n\t        return _node;\n\t      }\n\t    }\n\t  });\n\t};\n\t\n\tvar highlight = function highlight(html, needle) {\n\t  var tmp = document.createElement('div');\n\t  tmp.innerHTML = html;\n\t  var matching = [null];\n\t  ;[].forEach.call(tmp.childNodes, function (node) {\n\t    if (node.textContent.match(needle)) {\n\t      highlightContents(node, needle);\n\t      matching.push(node.outerHTML);\n\t    } else if (matching[matching.length - 1] !== null) {\n\t      matching.push(null);\n\t    }\n\t  });\n\t  if (matching[0] === null) matching.shift();\n\t  if (matching[matching.length - 1] === null) matching.pop();\n\t  return matching.map(function (m) {\n\t    return m === null ? '<p class=\"search-elided-section\">...</p>' : m;\n\t  }).join('\\n');\n\t};\n\t\n\tvar search = function search(edges, needle) {\n\t  var rx = new RegExp(needle, 'ig');\n\t  return edges.filter(function (_ref) {\n\t    var _ref$node$childMarkdo = _ref.node.childMarkdownRemark,\n\t        html = _ref$node$childMarkdo.html,\n\t        title = _ref$node$childMarkdo.frontmatter.title;\n\t\n\t    if (title.match(rx) || html.match(rx)) {\n\t      return true;\n\t    }\n\t  }).map(function (_ref2) {\n\t    var _ref2$node = _ref2.node,\n\t        relativePath = _ref2$node.relativePath,\n\t        _ref2$node$childMarkd = _ref2$node.childMarkdownRemark,\n\t        html = _ref2$node$childMarkd.html,\n\t        title = _ref2$node$childMarkd.frontmatter.title;\n\t\n\t    return {\n\t      relativePath: relativePath,\n\t      html: highlight(html, needle),\n\t      // html: html.replace(rx, v => '<span style=\"font-weight: bold; background-color: red\">' + v + '</span>'),\n\t      title: title // TODO highlight cleverly, probably use the markdown\n\t      // source instead\n\t    };\n\t  });\n\t};\n\t\n\tvar Search = function (_React$Component) {\n\t  _inherits(Search, _React$Component);\n\t\n\t  function Search(props) {\n\t    _classCallCheck(this, Search);\n\t\n\t    var _this = _possibleConstructorReturn(this, (Search.__proto__ || Object.getPrototypeOf(Search)).call(this));\n\t\n\t    _initialiseProps.call(_this);\n\t\n\t    var text = decodeURIComponent(props.location.search.slice(1));\n\t    _this.state = {\n\t      results: text.trim().length > 2 ? search(props.data.allFile.edges, text.toLowerCase()) : [],\n\t      searchText: text\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  _createClass(Search, [{\n\t    key: \"componentDidMount\",\n\t    value: function componentDidMount() {\n\t      this.input.focus();\n\t    }\n\t  }, {\n\t    key: \"renderMain\",\n\t    value: function renderMain() {\n\t      var _this2 = this;\n\t\n\t      return Glamor.createElement(\n\t        \"div\",\n\t        { css: styles.container },\n\t        Glamor.createElement(\n\t          \"div\",\n\t          { css: styles.searchBar },\n\t          \"Search\",\n\t          Glamor.createElement(\"input\", {\n\t            ref: function ref(input) {\n\t              return _this2.input = input;\n\t            },\n\t            css: styles.searchInput,\n\t            onChange: function onChange(e) {\n\t              return _this2.setText(e.target.value);\n\t            },\n\t            value: this.state.searchText,\n\t            type: \"text\"\n\t          })\n\t        ),\n\t        Glamor.createElement(\n\t          \"div\",\n\t          { css: styles.results },\n\t          this.state.results.slice(0, 10).map(function (result) {\n\t            return Glamor.createElement(\n\t              \"div\",\n\t              { key: result.relativePath, css: styles.result },\n\t              Glamor.createElement(\n\t                _Link2.default,\n\t                { css: styles.resultTitle, to: (0, _GuideSidebar.fixPath)(result.relativePath) },\n\t                \"\\u2023 \",\n\t                result.title\n\t              ),\n\t              Glamor.createElement(\"div\", {\n\t                css: styles.resultBody,\n\t                dangerouslySetInnerHTML: { __html: result.html }\n\t              })\n\t            );\n\t          })\n\t        )\n\t      );\n\t    }\n\t  }, {\n\t    key: \"render\",\n\t    value: function render() {\n\t      var _props$pathContext = this.props.pathContext,\n\t          section = _props$pathContext.section,\n\t          sectionTitle = _props$pathContext.sectionTitle;\n\t      var allFile = this.props.data.allFile;\n\t\n\t      return Glamor.createElement(\n\t        \"div\",\n\t        null,\n\t        Glamor.createElement(_reactHelmet2.default, { title: sectionTitle + \" Search\" }),\n\t        Glamor.createElement(\n\t          _Section2.default,\n\t          { backgroundColor: _colors.accent, css: { color: 'white' } },\n\t          Glamor.createElement(_Header2.default, { inverted: true }),\n\t          Glamor.createElement(\n\t            \"div\",\n\t            { css: { alignItems: 'center' } },\n\t            Glamor.createElement(\n\t              \"h1\",\n\t              null,\n\t              Glamor.createElement(\n\t                _Link2.default,\n\t                { css: styles.topLink, to: \"/\" + section },\n\t                sectionTitle\n\t              )\n\t            )\n\t          )\n\t        ),\n\t        Glamor.createElement(\n\t          _Section2.default,\n\t          { css: styles.contentSection },\n\t          Glamor.createElement(\n\t            \"div\",\n\t            { css: styles.sidebar },\n\t            Glamor.createElement(_GuideSidebar2.default, {\n\t              current: section + \"/search\",\n\t              search: \"/\" + section + \"/search\",\n\t              root: (0, _GuideSidebar.constructTree)(section, allFile.edges.map(function (edge) {\n\t                return edge.node;\n\t              }))\n\t            })\n\t          ),\n\t          this.renderMain()\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Search;\n\t}(_react2.default.Component);\n\t\n\tvar _initialiseProps = function _initialiseProps() {\n\t  var _this3 = this;\n\t\n\t  this.setText = function (text) {\n\t    window.history.replaceState({}, document.title, window.location.pathname + '?' + text);\n\t    _this3.setState({\n\t      searchText: text,\n\t      results: text.trim().length > 2 ? search(_this3.props.data.allFile.edges, text.toLowerCase()) : []\n\t    });\n\t  };\n\t};\n\t\n\texports.default = Search;\n\t\n\t\n\tvar styles = {\n\t  container: {\n\t    flex: 1,\n\t    flexShrink: 1\n\t  },\n\t  editLink: {\n\t    fontSize: '14px',\n\t    fontWeight: 'normal',\n\t    lineHeight: '25px'\n\t  },\n\t  title: {\n\t    borderBottom: '1px solid #aaa',\n\t    display: 'flex',\n\t    flexDirection: 'row',\n\t    justifyContent: 'space-between',\n\t    alignItems: 'flex-end'\n\t  },\n\t  contentSection: {\n\t    flexDirection: 'row',\n\t    '@media(max-width: 800px)': {\n\t      flexDirection: 'column'\n\t    }\n\t  },\n\t  sidebar: {\n\t    // padding: '2em',\n\t  },\n\t  main: {\n\t    position: 'relative',\n\t    flex: 1,\n\t    padding: '2em',\n\t    minWidth: 0\n\t  },\n\t\n\t  searchBar: {\n\t    flexDirection: 'row',\n\t    alignItems: 'center',\n\t    padding: 10\n\t  },\n\t\n\t  searchInput: {\n\t    flex: 1,\n\t    padding: '5px 10px',\n\t    fontSize: 18,\n\t    marginLeft: 10\n\t  },\n\t\n\t  results: {\n\t    padding: 10\n\t  },\n\t\n\t  result: {},\n\t\n\t  resultTitle: {\n\t    fontWeight: 'bold'\n\t  },\n\t\n\t  resultBody: {\n\t    fontSize: 12,\n\t    paddingLeft: 20,\n\t    '& .search-highlighted-result': {\n\t      backgroundColor: 'gold',\n\t      fontWeight: 'bold'\n\t    },\n\t    '& p': {\n\t      marginBottom: 10\n\t    },\n\t    '& .search-elided-section': {\n\t      color: '#aaa',\n\t      height: 5,\n\t      marginBottom: 15,\n\t      marginTop: -10\n\t    },\n\t    '& ul': {\n\t      marginBottom: 5\n\t    },\n\t    '& code': {\n\t      fontSize: 'inherit'\n\t    }\n\t  }\n\t\n\t};\n\t\n\tvar pageQuery = exports.pageQuery = \"** extracted graphql fragment **\";\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(\"./node_modules/glamor-react/lib/index.js\")))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// page-component---src-templates-search-js-e9674273a0d821018daa.js","import React from 'react'\nimport Link from './Link'\n\nimport {accent} from '../utils/colors'\n\nexport default class GuideSidebar extends React.Component {\n  state = {closed: true}\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.current !== this.props.current) {\n      this.setState({closed: true})\n    }\n  }\n  render() {\n    return <div css={styles.container}>\n      <div\n        css={styles.navToggle}\n        onClick={() => this.setState({closed: !this.state.closed})}\n      >\n        Navigation\n      </div>\n      <div css={[styles.contents, this.state.closed && styles.hiddenContents]}>\n        <Link to={this.props.search}>Search</Link>\n        <Node current={this.props.current} item={this.props.root} root depth={0} />\n      </div>\n    </div>\n  }\n}\n\nconst Node = ({current, root, item: {title, relativePath, children}, depth}) => {\n  const linkStyles = [styles.link, styles['link' + depth], relativePath === current && styles.currentLink]\n  return children.length\n  ? <div css={[styles.node, root && styles.rootNode]}>\n      {!root ? <Link to={relativePath} css={linkStyles}>{title}</Link> : null}\n      <ul css={[styles.children, root && styles.rootChildren]}>\n      {children.map(child => <li style={styles.li} key={child.relativePath}><Node current={current} item={child} depth={depth + 1} /></li>)}\n      </ul>\n    </div>\n  : <Link css={[styles.node, linkStyles]} to={relativePath}>{title}</Link>\n}\n\nexport const sidebarFragment = graphql`\n  fragment guideSidebar on RootQueryType {\n    allFile(filter:{\n      relativePath:{regex:$relatedFiles}\n    }) {\n      edges{\n        node{\n          relativePath\n          childMarkdownRemark{\n            frontmatter{\n              title\n              order\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nconst styles = {\n  container: {\n    width: 200,\n    fontSize: 14,\n    lineHeight: '14px',\n    '@media(max-width: 800px)': {\n      width: 'auto',\n    },\n  },\n\n  contents: {\n    padding: '2em',\n  },\n\n  hiddenContents: {\n    '@media(max-width: 800px)': {\n      display: 'none',\n    }\n  },\n\n  navToggle: {\n    backgroundColor: '#444',\n    color: 'white',\n    padding: '1em 2em',\n    alignSelf: 'stretch',\n    display: 'none',\n    cursor: 'pointer',\n    '@media(max-width: 800px)': {\n      display: 'flex',\n    }\n  },\n\n  node: {\n\n  },\n\n  li: {\n    margin: 0,\n    padding: 0,\n  },\n\n  link: {\n    textDecoration: 'none',\n    color: 'currentColor',\n    lineHeight: '1.2em',\n    paddingBottom: 3,\n    paddingTop: 5,\n    display: 'block',\n  },\n\n  currentLink: {\n    textDecoration: 'underline',\n    textDecorationColor: accent,\n    color: accent,\n  },\n\n  link1: {\n    fontWeight: 'bold',\n    fontSize: '1.2em',\n    lineHeight: '1.2em',\n    // paddingBottom: 10,\n    // marginTop: 5,\n  },\n\n  rootNode: {\n  },\n\n  children: {\n    listStyle: 'none',\n    margin: 0,\n    padding: 0,\n    paddingLeft: 15,\n    marginLeft: 0,\n    borderLeft: '1px solid #aaa',\n  },\n\n  rootChildren: {\n    borderLeft: 'none',\n    marginLeft: 0,\n    paddingLeft: 0,\n  },\n}\n\n\nexport const fixPath = relativePath => {\n  if (relativePath.match(/\\/index\\.md$/)) {\n    return '/' + relativePath.slice(0, -'/index.md'.length)\n  }\n  return '/' + relativePath.slice(0, -'.md'.length)\n}\n\nconst parseData = nodes => nodes.map(({\n  relativePath,\n  childMarkdownRemark: {frontmatter: {title, order}}\n}) => ({relativePath: fixPath(relativePath), title, order}))\n\nconst values = obj => Object.keys(obj).map(k => obj[k])\n\nconst listify = node => ({\n  ...node,\n  children: values(node.children)\n    .sort((a, b) => a.order - b.order)\n    .map(listify)\n})\n\nexport const constructTree = (section, files) => {\n  const tree = {children: {}}\n  parseData(files).forEach(({relativePath, title, order}) => {\n    const parts = relativePath.split(/\\//g).slice(1)\n    const last = parts.pop()\n    let parent = tree\n    parts.forEach(part => {\n      if (!parent.children[part]) parent.children[part] = {children: {}}\n      parent = parent.children[part]\n    })\n    parent.children[last] = {\n      children: {},\n      ...parent.children[last],\n      relativePath,\n      title,\n      order,\n    }\n  })\n  return listify(tree.children[section])\n}\n\n// TODO\n// export const query =\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GuideSidebar.js","import React from \"react\"\nimport Helmet from \"react-helmet\"\n\nimport Section from '../components/Section'\nimport GuideSidebar, {constructTree, fixPath} from '../components/GuideSidebar'\nimport {accent, gray} from '../utils/colors'\n\nimport Link from \"../components/Link\"\nimport Header from '../components/Header'\n\nconst walk = (node, fn) => {\n  [].forEach.call(node.childNodes, child => {\n    const res = fn(child)\n    if (res) {\n      node.replaceChild(res, child)\n    } else {\n      walk(child, fn)\n    }\n  })\n}\n\nconst highlightContents = (node, needle) => {\n  walk(node, child => {\n    if (child.nodeName === '#text') {\n      if (child.nodeValue.match(needle)) {\n        const node = document.createElement('span')\n        node.innerHTML = child.nodeValue.replace(needle, v => '<span class=\"search-highlighted-result\">' + v + '</span>')\n        return node\n      }\n    }\n  })\n}\n\nconst highlight = (html, needle) => {\n  const tmp = document.createElement('div')\n  tmp.innerHTML = html;\n  const matching = [null];\n  ;[].forEach.call(tmp.childNodes, node => {\n    if (node.textContent.match(needle)) {\n      highlightContents(node, needle)\n      matching.push(node.outerHTML)\n    } else if (matching[matching.length - 1] !== null) {\n      matching.push(null)\n    }\n  })\n  if (matching[0] === null) matching.shift()\n  if (matching[matching.length - 1] === null) matching.pop()\n  return matching.map(m => m === null ? '<p class=\"search-elided-section\">...</p>' : m).join('\\n')\n}\n\nconst search = (edges, needle) => {\n  const rx = new RegExp(needle, 'ig')\n  return edges.filter(({node: {childMarkdownRemark: {html, frontmatter: {title}}}}) => {\n    if (title.match(rx) || html.match(rx)) {\n      return true\n    }\n  }).map(({node: {relativePath, childMarkdownRemark: {html, frontmatter: {title}}}}) => {\n    return {\n      relativePath,\n      html: highlight(html, needle),\n      // html: html.replace(rx, v => '<span style=\"font-weight: bold; background-color: red\">' + v + '</span>'),\n      title,\n    } // TODO highlight cleverly, probably use the markdown\n    // source instead\n  })\n}\n\nexport default class Search extends React.Component {\n  constructor(props) {\n    super()\n    const text = decodeURIComponent(props.location.search.slice(1))\n    this.state = {\n      results: text.trim().length > 2 ? search(props.data.allFile.edges, text.toLowerCase()) : [],\n      searchText: text,\n    }\n  }\n\n  setText = text => {\n    window.history.replaceState({}, document.title, window.location.pathname + '?' + text)\n    this.setState({\n      searchText: text,\n      results: text.trim().length > 2 ? search(this.props.data.allFile.edges, text.toLowerCase()) : []\n    })\n  }\n\n  componentDidMount() {\n    this.input.focus()\n  }\n\n  renderMain() {\n    return <div css={styles.container}>\n      <div css={styles.searchBar}>\n        Search\n        <input\n          ref={input => this.input = input}\n          css={styles.searchInput}\n          onChange={e => this.setText(e.target.value)}\n          value={this.state.searchText}\n          type=\"text\"\n        />\n      </div>\n      <div css={styles.results}>\n        {this.state.results.slice(0, 10).map(result => (\n          <div key={result.relativePath} css={styles.result}>\n            <Link css={styles.resultTitle} to={fixPath(result.relativePath)}>\n              â€£ {result.title}\n            </Link>\n            <div\n              css={styles.resultBody}\n              dangerouslySetInnerHTML={{__html: result.html}}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  }\n\n  render() {\n    const {section, sectionTitle} = this.props.pathContext\n    const {allFile} = this.props.data\n    return <div>\n      <Helmet title={`${sectionTitle} Search`} />\n      <Section backgroundColor={accent} css={{color: 'white'}}>\n        <Header inverted />\n        <div css={{alignItems: 'center'}}>\n          <h1>\n            <Link css={styles.topLink} to={`/${section}`}>\n              {sectionTitle}\n            </Link>\n          </h1>\n        </div>\n      </Section>\n      <Section css={styles.contentSection}>\n        <div css={styles.sidebar}>\n          <GuideSidebar\n            current={`${section}/search`}\n            search={`/${section}/search`}\n            root={constructTree(section, allFile.edges.map(edge => edge.node))}\n          />\n        </div>\n        {this.renderMain()}\n      </Section>\n    </div>\n  }\n}\n\nconst styles = {\n  container: {\n    flex: 1,\n    flexShrink: 1,\n  },\n  editLink: {\n    fontSize: '14px',\n    fontWeight: 'normal',\n    lineHeight: '25px',\n  },\n  title: {\n    borderBottom: '1px solid #aaa',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end',\n  },\n  contentSection: {\n    flexDirection: 'row',\n    '@media(max-width: 800px)': {\n      flexDirection: 'column',\n    },\n  },\n  sidebar: {\n    // padding: '2em',\n  },\n  main: {\n    position: 'relative',\n    flex: 1,\n    padding: '2em',\n    minWidth: 0,\n  },\n\n  searchBar: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 10,\n  },\n\n  searchInput: {\n    flex: 1,\n    padding: '5px 10px',\n    fontSize: 18,\n    marginLeft: 10,\n  },\n\n  results: {\n    padding: 10,\n  },\n\n  result: {\n\n  },\n\n  resultTitle: {\n    fontWeight: 'bold',\n  },\n\n  resultBody: {\n    fontSize: 12,\n    paddingLeft: 20,\n    '& .search-highlighted-result': {\n      backgroundColor: 'gold',\n      fontWeight: 'bold',\n    },\n    '& p': {\n      marginBottom: 10,\n    },\n    '& .search-elided-section': {\n      color: '#aaa',\n      height: 5,\n      marginBottom: 15,\n      marginTop: -10,\n    },\n    '& ul': {\n      marginBottom: 5,\n    },\n    '& code': {\n      fontSize: 'inherit',\n    }\n  }\n\n}\n\nexport const pageQuery = graphql`\n  query SearchPage($relatedFiles: String!) {\n    allFile(filter:{\n      relativePath:{regex:$relatedFiles}\n    }) {\n      edges{\n        node{\n          relativePath\n          childMarkdownRemark {\n            frontmatter {\n              title\n              order\n            }\n            html\n          }\n        }\n      }\n    }\n  }\n`\n\n\n\n// WEBPACK FOOTER //\n// ./src/templates/Search.js"],"sourceRoot":""}